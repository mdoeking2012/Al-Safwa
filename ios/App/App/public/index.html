<!DOCTYPE html>
<html lang="ar" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <title>Al Safwa Auto Parts</title>
    <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <link rel="icon" type="image/x-icon" href="/assets/favicon.6e76f2c5.ico" />
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkFsIFNhZndhIENoYXQiLAoic2hvcnRfbmFtZSI6ICJBbCBTYWZ3YSBDaGF0IiwKICAic3RhcnRfdXJsIjogImluZGV4Lmh0bWwiLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJpY29ucyI6IFt7CiAgICAic3JjIjogImFzc2V0cy9pbWdzL2xvZ28ucG5nIiwKICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICJ0eXBlIjogImltYWdlL3BuZyIKICB9XSwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjMzFkNTNkIiwKICAidGhlbWVfY29sb3IiOiAiIzMxZDUzZCIKfQo=" />
    
    <meta name="theme-color" content="#31d53d" />
<!-- New Files -->
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-messaging.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">


    <script type="module" crossorigin src="/assets/index.16a5aa61.js"></script>
    <link rel="stylesheet" href="/assets/index.0a3d7fb5.css">
  </head>
  <body>
<!-- Site Files -->
<div class="page-content-new">
<div id="chat-app">
<div id="chat-container">
<div class="mobile-container">
<div class="topnav">
<a href="" class="active">Al Safwa Chat</a>
<div id="myLinks">
<a href="https://alsafwaautopartsest.com/">الرئيسية</a>
<a id="privacy">سياسة الخصوصية</a>
<a href="https://alsafwaautopartsest.com/contact">اتصل بنا</a>
<a href="https://alsafwaautopartsest.com/customer/profile-change">تعديل الملف الشخصي</a>
<a id="logout">تسجيل الخروج</a>
<a id="delete-my-messages">حذف جميع الرسائل الخاصة بك</a>
<a id="delete-user">حذف الحساب</a>
</div>
<a href="javascript:void(0);" class="icon" onclick="myFunction()">
<i class="fa fa-bars"></i>
</a>
</div>
</div>
<br>
<span id="username">username</span>
<h3></h3>
<div id="messages-container"></div>
<div id="input-container">
<input type="file" id="file-input" style="display: none;">
<input type="text" id="message" placeholder="رسالة" />
</div>
<div id="thumbnail-container" style="display: none;">
<img id="thumbnail" src="" alt="Thumbnail" style="width: 100px; height: auto;">
</div>
<div id="chat-button">
<button id="send"><i class="fas fa-paper-plane"></i></button>
<button id="record"><i class="fas fa-microphone"></i></button>
<button id="emoji-button"><i class="fa-solid fa-face-smile-beam" style="color: #ffffff;"></i></button>
<button id="images"><i class="fas fa-paperclip"></i></button>
</div>
<div id="emoji-menu" style="display: none;">
<span>😀</span> <span>😃</span> <span>😄</span> <span>😁</span> <span>😆</span> <span>😅</span> <span>😂</span> <span>🤣</span>
<br>
<span>😊</span> <span>😇</span> <span>🙂</span> <span>🙃</span> <span>😉</span> <span>😌</span> <span>😍</span> <span>🥰</span>
<br>
<span>😘</span> <span>😗</span> <span>😙</span> <span>😚</span> <span>😋</span> <span>😛</span> <span>😝</span> <span>😜</span>
</div>
</div>
</div>
</div>

<div id="loading-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 9999;">
<div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
<p style="color: white; font-size: 24px;">جاري التحميل...</p>
</div>
</div>
<div id="toast-photo" style="display: none; position: fixed; font-weight: bold; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: #34495e; color: white; padding: 16px; border-radius: 4px; z-index: 9999; box-shadow: 0px 0px 10px rgba(0,0,0,0.5);">
<span id="toast-message"></span>
</div>
<div id="toast">
<div id="toast-frame">
<span id="toast-message"></span>
</div>
</div>
<div id="edit-toast">
<div id="edit-toast-frame">
<p>يمكنك تعديل الرسالة</p>
<input type="text" id="edit-input" placeholder="تعديل الرسالة">
<button id="edit-confirm">تأكيد</button>
</div>
</div>
<div id="reply-toast">
<div id="reply-toast-frame">
<p>يمكنك الرد علي الرسالة هنا</p>
<input type="text" id="reply-input" placeholder="الرد على الرسالة">
<button id="reply-confirm">تأكيد</button>
</div>
</div>
<div id="delete-toast" class="toast-delete-messages">
<div class="toast-frame">
<p>هل أنت متأكد من مسح جميع الرسائل؟</p>
<button id="delete-confirm">نعم</button>
<button id="delete-cancel">لا</button>
</div>
</div>
<div id="confirmation-toast" class="hidden">
<h3>هل أنت متأكد من حذف حسابك ؟</h3>
<button id="confirm-delete">نعم</button>
<button id="cancel-delete">لا</button>
</div>
<div id="imageModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.8); z-index:1000;">


<span id="closeImageModal" style="position:absolute; top:20px; right:30px; font-size:30px; cursor:pointer; background-color: white; border-radius: 30%; padding: 10px; color: #34495e;">&times;</span>
<img id="modalImage" style="margin:auto; max-width:80%; max-height:80%; position:absolute; top:0; bottom:0; left:0; right:0;">
</div>

<!-- Site Files -->


<!-- Scripts -->
<script>
if ('serviceWorker' in navigator) {
navigator.serviceWorker.register('./js/chat-new-service-worker.js')
.then(function(registration) {
console.log('Service Worker registered');
messaging.useServiceWorker(registration);
})
.catch(function(error) {
console.log('Service Worker registration failed:', error);
});
}
</script>


<script>
document.addEventListener('click', function(event) {
var isClickInsideEmojiButton = document.getElementById('emoji-button').contains(event.target);
var isClickInsideEmojiMenu = document.getElementById('emoji-menu').contains(event.target);
if (!isClickInsideEmojiButton && !isClickInsideEmojiMenu) {
document.getElementById('emoji-menu').style.display = 'none';
}
});
</script>




<script>
var firebaseConfig = {
apiKey: "AIzaSyAgtFgHvsQZKqaXBC-Bv0yygaT2iwMN82c",
authDomain: "al-safwa-auto-parts.firebaseapp.com",
projectId: "al-safwa-auto-parts",
storageBucket: "al-safwa-auto-parts.appspot.com",
messagingSenderId: "813258328629",
appId: "1:813258328629:web:3d89d91947ce43c9e2bf7c"
};
firebase.initializeApp(firebaseConfig);
const messaging = firebase.messaging();
if ('serviceWorker' in navigator) {
navigator.serviceWorker.register('/testchat/chat-new-service-worker.js')
.then(function(registration) {
console.log('Service Worker registered');
})
.catch(function(error) {
console.log('Service Worker registration failed:', error);
});
}
Notification.requestPermission().then((permission) => {
if (permission === 'granted') {
messaging.getToken().then((currentToken) => {
if (currentToken) {
console.log('current token for client: ', currentToken);
} else {
console.log('No registration token available. Request permission to generate one.');
}
}).catch((err) => {
console.log('An error occurred while retrieving token. ', err);
});
}
});
messaging.onMessage((payload) => {
const notificationTitle = payload.notification.title;
const notificationOptions = {
body: payload.notification.body,
icon: 'https://alsafwaautopartsest.com/testchat/icon.png',
image: 'https://alsafwaautopartsest.com/testchat/icon.png',
actions: [
{action: 'like', title: '👍 Like'},
{action: 'reply', title: '⌨️ Reply'}
]
};
if (Notification.permission === 'granted') {
navigator.serviceWorker.getRegistration().then(registration => {
registration.showNotification(notificationTitle, notificationOptions);
});
}
});
messaging.onMessage((payload) => {
console.log('Message received. ', payload);
});
messaging.getToken().then((currentToken) => {
if (currentToken) {
fetch('https://iid.googleapis.com/iid/v1/'+currentToken+'/rel/topics/all', {
method: 'POST',
headers: new Headers({
'Authorization': 'key=AAAAvVn5SjU:APA91bFvijHcU4qs1zMPtD2tpFkMpA3lR258cRDnb95rmxjmEBmvpdTezCZgjUcyoXC5brTTWeDHA1dzq3RJIgNqvclLmkMr7WUrLJVe29F9SKawSz67Ahkhp_J7PI4m_SB3NebwFMJb'
})
}).then(response => {
if (response.status < 400) {
console.log('Subscribed to topic');
} else {
console.log('Failed to subscribe to topic');
}
}).catch(error => {
console.log('Subscription error:', error);
});
}
});
</script>
<script>
function myFunction() {
var x = document.getElementById("myLinks");
if (x.style.display === "block") {
x.style.display = "none";
} else {
x.style.display = "block";
}
}
</script>

  </body>
</html>
